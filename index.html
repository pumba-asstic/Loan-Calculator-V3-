<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lift Off Lending</title>
  <style>
  body {
    font-family: Arial, sans-serif;
    padding: 40px;
    background-color: #f9f9f9;
    color: #333;
  }
  footer{
    text-align: center;
    padding: 20px;
    background-color: #003366;
    color: white;
    position: fixed;
    bottom: 0;
    width: 100%;
  }
  h2 {
    text-align: center;
    color: #003366;
  }

  .input-group {
      margin-bottom: 30px;
    }
    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }
.ima{
  width:100% ; 
  height: auto;
  margin-bottom: 20px;
  display: block;
  margin-left: auto;
  margin-right: auto;  
}
    /* Shared slider styles */
    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 4px;
      background: #ddd;
      border-radius: 2px;
      outline: none;
    }
    /* Chrome/Safari */
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      background: #e50914;
      border-radius: 50%;
      cursor: pointer;
      margin-top: -6px; /* center the thumb over the track */
    }
    /* Firefox */
    input[type="range"]::-moz-range-thumb {
      width: 16px;
      height: 16px;
      background: #e50914;
      border-radius: 50%;
      cursor: pointer;
    }

    /* Ticks below slider */
    .ticks {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      margin-top: 8px;
    }
    .ticks span {
      text-align: center;
      font-size: 0.85rem;
      color: #666;
    }
  button.calc-btn {
    margin-top: 10px;
    padding: 10px 20px;
    background-color: #003366;
    color: #fff;
    border: none;
    cursor: pointer;
    font-size: 1rem;
  }

  /* Results panel styling */
  .results {
    max-width: 400px;
    background-color: #fff;
    border: 1px solid #ddd;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    padding: 30px;
    margin-top: 30px;
    display: none;
  }
  .results .estimate-label {
    text-align: center;
    font-size: 0.9rem;
    color: #666;
    margin-bottom: 10px;
  }
  .results .estimate-amount {
    text-align: center;
    font-size: 2.5rem;
    margin-bottom: 20px;
    color: #222;
  }
  .results hr {
    border: none;
    border-top: 1px solid #eee;
    margin: 20px 0;
  }
  .results .include-label {
    font-size: 0.9rem;
    margin-bottom: 10px;
    color: #666;
  }
  .results .breakdown {
    margin-bottom: 20px;
  }
  .results .breakdown .line-item {
    display: flex;
    justify-content: space-between;
    margin: 5px 0;
    font-size: 0.95rem;
  }
  .results .disclaimer {
    font-size: 0.8rem;
    color: #999;
    margin-bottom: 20px;
    line-height: 1.4;
  }
  .results .apply-btn {
    display: block;
    width: 100%;
    padding: 10px;
    background-color: #003366;
    color: #fff;
    font-size: 1rem;
    text-align: center;
    border: none;
    cursor: pointer;
  }
</style>
</head>
<nav></nav>

</header>
<body>
<img src="/images/Picture 1.jpg">

<div class="calculator-container">
<h2>Loan Calculator</h2>
<div class="input-group">
  <label for="loanAmountInput">Enter Loan Amount (R):</label>
  <input 
    type="number" 
    id="loanAmountDisplay"
    id="loanAmountInput"
    min="500" 
    max="15000" 
    step="100" 
    value="1000"
    output="updatedLoanDisplay()"
    oninput = "updatedLoandDisplay()"
  />
  <p> Enter an amount between R 500 and R 15000</p>
  <span class="value" id="loanAmountDisplay">R 1 000</span>
  <span class ="value" id="loanAmountFormattedDisplay">R 1 000</span> <!-- display span id changed-->
</div>

<div class="input-group">
  <label for="termSlider">Repayment Term (months):</label>
  <input 
    type="range" 
    id="termSlider"
    min="1" 
    max="60" 
    value="6"
  />
  <span class="value">months</span>
  <span class="value" id="termMonthsDisplay"> 6 months</span>
</div>

<button class="calc-btn" onclick="calculateLoan()">Calculate Repayment</button> <!-- Changed button text -->
<div id="errorMessage" class="error-message"></div>

<div class="results" id="results">
  <div class="estimate-label">Estimated monthly repayment will be</div>
  <div class="estimate-amount">R <span id="monthlyRepaymentLarge">0.00</span></div>
  <hr>
  <div class="include-label">Your monthly repayment includes:</div>
  <div class="breakdown">
    <div class="line-item">
      <span>Initiation fee (once off)</span>
      <span>R <span id="initiationFeeResult">0.00</span></span>
    </div>
    <div class="line-item">
        <span>Service fee</span> <!-- Changed label to Service fee -->
        <span>R <span id="serviceFeeResult">0.00</span></span>
      </div>
    <div class="line-item">
      <span>VAT</span> <!-- Changed label to VAT -->
      <span>R <span id="vatResult">0.00</span></span>
    </div>
    <div class="line-item" style="font-weight: bold; margin-top: 10px;"> <!-- Added Total Repayment -->
        <span>Total Amount Repayable</span>
        <span>R <span id="totalRepaymentResult">0.00</span></span>
      </div>
  </div>
  <hr>
  <div class="disclaimer">
    The amount we can lend you depends on your credit and affordability assessment
  </div>
  <a href="Application form copy.html"class="apply-btn">Apply Now</a>
</div>
</div> 
  <script>
    /*update display when slider moves
    const slider = document.getElementById('loanAmountDisplay');
    const display = document.getElementById('loanAmountDisplay');
    const termInput = document.getElementById('termSlider');
    const resultsDiv = document.getElementById('results');
    const errorDiv = document.getElementById('errorMessage');*/

    const slider= documnet .getElementById('loanAmountDisplay');
    const display = document.getElementById('loanAmountDisplay');
    const termInput = document.getElementById('termSlider');


    const loanAmountInput = document.getElementById('loanAmountInput');
    const loanAmountFormattedDisplay =document.getElementById('loanAmountFormattedDisplay');
    const termSlider =document.getElementById('termSlider');
    const termMonthsDisplay =document.getElementById('termMonthsDisplay');
    const resultsDiv = document .getElementById('results');
    const errorDiv = document.getElementById('errorMessage');

    // Function to format number with spaces
    function formatNumber(num) {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
    }
     // Initial display update
     display.textContent = "R " + formatNumber(parseFloat(slider.value));

// Update display when slider moves
slider.addEventListener('input', () => {
  // Use parseFloat before formatting
  display.textContent = "R " + formatNumber(parseFloat(slider.value));
});
 return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");

//display updates 
loanDisplay.textContent ="R" + formatNumber(parseFloat(loadInput.value));
termDisplay.textContent = termSlider.value + " months"

//loan amount display changes with input

function updatedLoanDisplay(){
  let value = parseFloat(loanAmountInput.value);
  const minVal =parseFload(loanAmountInput.min);
  const maxVal = parseFloat(loanAmountInput.max)

  if ( isNaN(value)){
    loanAmountFormattedDisplay.textContent = "R" =formatNumber(minVal);
    return;
  }
  loanAmountFormattedDisplay.textContent ="R" +formatNumber(value);
}
 function updateTermDisplay(){
  termMonthsDisplay.textContent = termSlider.value +"months";
 }

 updatedLoanDisplay();
 updateTermDisplay();
      
 //event listerns 
 loanAmountInput.addEventListener('input',updatedLoanDisplay);
 termSlider.addEventListener('input', updateTermDisplay);

    function calculateLoan() {
      errorDiv.textContent = '';
      resultsDiv.style.display = 'none';

      const loanAmount= parseFloat(loanAmountInput.value);
      const termMonths= parseInt(termSlider.value,10);
      //loan amount validation 
      if (isNan(loanAmount)|| loanAmount <parseFloat(loanAmountInput.min)|| loanAmount> parseFloat(LoanAmountInput.max)){
        errroDiv.textContent ='please enter a valid loan amount between R ${loanAmountInput.min} and  R${loanAmountInpout.max}';
        loanAmountInput.focus();
        return;
      }
      if (isNaN(termMonths) || termMonths < 1) {
        errorDiv.textContent= 'Please enter a valid repayment term (at least 1 month).';
        return;
      }
      const tiers = [
        // Tier 1: Up to 1400
        { maxAmount: 1400, interestRate: 0.07, serviceFeeRate: 0.14 },
        // Tier 2: 1401 to 5000
        { maxAmount: 5000, interestRate: 0.06, serviceFeeRate: 0.13 },
        // Tier 3: 5001 to 9000
        { maxAmount: 9000, interestRate: 0.04, serviceFeeRate: 0.12 },
        // Tier 4: 9001 to 15000
        { maxAmount: 15000, interestRate: 0.03, serviceFeeRate: 0.11 }
      ];

      const initiationFee = 60;
      const VAT_RATE = 0.15; // 15% VAT

      let selectedTier = null;
      for (const tier of tiers) {
          // Check if loanAmount falls within the current tier's max limit
          // Assumes tiers are ordered by maxAmount ascending
          if (loanAmount <= tier.maxAmount) {
              selectedTier = tier;
              break; // Found the correct tier, exit loop
          }
      }

      if (!selectedTier) {
        // This should ideally not happen if slider max matches last tier max
        errorDiv.textContent = "Error: Loan amount does not fall into a defined tier.";
        console.error("Tier finding failed for amount:", loanAmount); // Log for debugging
        return;
      }
     

     // --- Calculations (Using the logic from your original code, with corrections) ---

      const totalInterest = loanAmount * selectedTier.interestRate * termMonths; // Example: Simple interest over the term

      // NOTE: Assuming service fee is a total fee based on principal
      const totalServiceFee = loanAmount * selectedTier.serviceFeeRate;

      // Calculate VAT on fees
      const vatOnFees = (totalServiceFee + initiationFee) * VAT_RATE;

      // Calculate Total Repayment
      const totalRepayment = loanAmount + totalInterest + totalServiceFee + initiationFee + vatOnFees;

      // Calculate Monthly Repayment
      const monthlyRepay = totalRepayment / termMonths;


      // Render results
      document.getElementById('monthlyRepaymentLarge').innerText = monthlyRepay.toFixed(2);
      document.getElementById('serviceFeeResult').innerText = totalServiceFee.toFixed(2);
      document.getElementById('vatResult').innerText = vatOnFees.toFixed(2); // Display calculated VAT
      document.getElementById('initiationFeeResult').innerText = initiationFee.toFixed(2); // Update from constant
      document.getElementById('totalRepaymentResult').innerText = totalRepayment.toFixed(2); // Display total repayment


      // Show the results panel
      resultsDiv.style.display = 'block';
    }
  </script>
</body>
<footer>
  <a href="/legal documents/Terms and Conditions .pdf">Terms and Conditions</a> <br>  <a href="/legal documents/Privacy Statement.pdf">POPIA</a> <br> <i> Contact us:  or email us:<a href="info@liftofflending.co.za">info@liftofflending.co.za</a></i>
</footer>
</html>
